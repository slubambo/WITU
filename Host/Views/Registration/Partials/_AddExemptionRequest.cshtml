@model ARMSv2.Models.Registration.AddExemptionRequest


<script src="~/Scripts/base/jquery.validate.js"></script>
<script src="~/Scripts/base/jquery.validate.unobtrusive.js"></script>

<div>
    @using (Ajax.BeginForm("AddExemptionRequest", "Registration",
        new AjaxOptions()
        {
            OnBegin = "AddExemptionRequestOnBegin",
            LoadingElementId = "sp-loading-icon",
            OnComplete = "AddExemptionRequestOnComplete",
            HttpMethod = "POST",
            OnSuccess = "AddExemptionRequestOnSuccess",
            OnFailure = "AddExemptionRequestOnFailure"
        },
        new { @class = "form form-horizontal" }))
    {
        @Html.HiddenFor(x => x.StudentId)
        @Html.HiddenFor(x => x.UserId)
        @Html.HiddenFor(x => x.Id)
        
        @Html.ValidationSummary(false)

        <div class="alert alert-success well-sm hide" id="dv-add-exemption-request-success">
            <button type="button" class="close" data-dismiss="alert">×</button>
            <span>
                <span class="glyphicon glyphicon-saved"></span>
                <span class="" id="sp-add-exemption-request-success">
                    Changes successfully saved.
                </span>
            </span>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Reason, new { @class = "control-label col-sm-3" })
            <div class="col-md-9 progCoreInput">
                @Html.AutocompleteTextBoxFor(model => model.Reason, "AutoCompleteExemptionRequests", "Registration", new { studentId = Model.StudentId })


            </div>
        </div>
        
        <button type="submit" class="btn saveBtn" id="btn-add-exemption-request">
            Save
        </button>
        <span id="sp-loading-icon" class="fa fa-2x fa-spinner fa-spin hide"></span>
    }
</div>

<script type="text/javascript">
    $(document).ready(function() {
        
        // Initialise AutoComplete
        $('*[data-autocomplete-url]')
            .each(function () {
                $(this).autocomplete({
                    source: $(this).data("autocomplete-url"), //here
                    minLength: 5
                });
            });
        // End AutoComplete Initialisations

    });
</script>


